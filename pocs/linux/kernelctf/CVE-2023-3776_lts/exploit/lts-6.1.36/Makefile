all: exploit root
	tar czf ./x.tar.gz root exploit POC ip0 ip1 exploit.c sc.py Makefile root.c

exploit: exploit.c foo.o sc.h
	gcc exploit.c -o exploit -static -no-pie -g foo.o -pthread
root: root.c
	gcc -static -o root root.c
foo.o: foo.s
	nasm -f elf64 foo.s
sc.h: sc.py
	python3 sc.py > sc.h

install: exploit
	scp exploit POC root vm:
	ssh vm ./exploit
clean:
	rm exploit foo.o sc.h root

